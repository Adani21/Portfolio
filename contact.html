<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/contact.css">
</head>

<body>
    <div class="loadingScreen">
        <h1 class="loadText">adani<span class="loadExtra">.dev</span></h1>
        <div class="loadDots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
        <p class="loadExp">Loading experience...</p>
    </div>
    <div class="gradient-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="gradient-orb orb-4"></div>
        <div class="gradient-orb orb-5"></div>
        <div class="gradient-orb orb-6"></div>
    </div>

    <div class="floating-shapes">
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
        <div class="shape shape-circle"></div>
        <div class="shape shape-square"></div>
    </div>

    <div class="homeContact">
        <a href="./index.html">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="38" width="38">
                <g id="home">
                    <path id="Union" fill="#000000"
                        d="M10.7876 3.66609c0.7159 -0.54548 1.7088 -0.54542 2.4248 0l9.0537 6.89841c0.4392 0.3347 0.524 0.9621 0.1895 1.4014 -0.3347 0.4391 -0.9622 0.524 -1.4014 0.1894l-1.0537 -0.8037v7.6485c0 1.1045 -0.8955 1.9999 -2 2h-4.001c-0.5521 -0.0002 -1 -0.4479 -1 -1v-5h-2v5c0 0.5522 -0.4478 0.9999 -0.99999 1H6.00049c-1.10455 0 -1.99996 -0.8955 -2 -2v-7.6485l-1.05371 0.8037c-0.4393 0.3346 -1.06768 0.2498 -1.40235 -0.1894 -0.3343 -0.4391 -0.24936 -1.0667 0.18946 -1.4014zM6.00049 9.8282v9.1719h2.99902v-5c0 -0.5522 0.44789 -0.9998 1 -1h3.99999c0.5522 0.0001 1 0.4477 1 1v5h3.001V9.8282l-6 -4.57129z"
                        stroke-width="1"></path>
                </g>
            </svg>
        </a>
    </div>

    <section class="contact-section1 cf-section" id="contact">
        <div class="contact-card1 cf-card">
            <div class="cf-orbs">
                <span class="cf-orb cf-orb-1"></span>
                <span class="cf-orb cf-orb-2"></span>
                <span class="cf-orb cf-orb-3"></span>
            </div>




            <h2 class="cf-title">Let’s work together</h2>

            <form class="cf-form" novalidate>
                <div class="cf-field">
                    <input id="cf-name" name="name" type="text" placeholder="" required />
                    <label for="cf-name">Your name</label>
                </div>

                <div class="cf-field">
                    <input id="cf-email" name="email" type="email" placeholder="" required />
                    <label for="cf-email">Email address</label>
                </div>

                <div class="cf-field">
                    <input id="cf-subject" name="subject" type="text" placeholder="" />
                    <label for="cf-subject">Subject</label>
                </div>

                <div class="cf-field cf-textarea">
                    <textarea id="cf-message" name="message" rows="5" required></textarea>
                    <label for="cf-message">Your message</label>
                </div>

                <button class="cf-cta" type="submit">
                    <span>Send message</span>
                    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor" d="M4 12h13.17l-4.58-4.59L14 6l8 8-8 8-1.41-1.41L17.17 14H4z" />
                    </svg>
                </button>
                <p id="cf-status" class="cf-status" role="status" aria-live="polite"></p>
            </form>
        </div>
    </section>
    <script>
        (() => {
            const form = document.querySelector('.cf-form');
            if (!form) return;

            const nameEl = document.getElementById('cf-name');
            const emailEl = document.getElementById('cf-email');
            const subjectEl = document.getElementById('cf-subject');
            const messageEl = document.getElementById('cf-message');
            const statusEl = document.getElementById('cf-status');
            const btn = form.querySelector('.cf-cta');

            const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
            const hasTwoWords = v => v.trim().split(/\s+/).length >= 2;
            const setErr = (el, on) => el?.closest('.cf-field')?.classList.toggle('is-error', on);

            form.addEventListener('submit', async (e) => {
                e.preventDefault(); // stopt refresh

                // validatie
                let bad = false;
                if (!hasTwoWords(nameEl.value)) { setErr(nameEl, true); bad = true; } else setErr(nameEl, false);
                if (!emailRe.test(emailEl.value.trim())) { setErr(emailEl, true); bad = true; } else setErr(emailEl, false);
                if (!subjectEl.value.trim()) { setErr(subjectEl, true); bad = true; } else setErr(subjectEl, false);
                if (!messageEl.value.trim()) { setErr(messageEl, true); bad = true; } else setErr(messageEl, false);

                if (bad) {
                    if (statusEl) { statusEl.textContent = '❌ Vul naam (2 woorden), geldig e‑mail, subject en bericht in.'; statusEl.style.color = '#e06b6b'; }
                    return;
                }

                // UI state
                const original = btn ? btn.innerHTML : null;
                if (btn) { btn.disabled = true; btn.setAttribute('aria-busy', 'true'); btn.innerHTML = 'Sending…'; }

                try {
                    const res = await fetch('/send', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            name: nameEl.value.trim(),
                            email: emailEl.value.trim(),
                            subject: subjectEl.value.trim(),
                            message: messageEl.value.trim()
                        })
                    });

                    if (res.status === 200 || res.status === 202) {
                        if (statusEl) { statusEl.textContent = '✅ Message sent!'; statusEl.style.color = 'lightgreen'; setTimeout(() => statusEl.textContent = '', 3000); }
                        form.reset();
                    } else {
                        if (statusEl) { statusEl.textContent = '❌ Server error while sending.'; statusEl.style.color = '#e06b6b'; }
                    }
                } catch (err) {
                    console.error(err);
                    if (statusEl) { statusEl.textContent = '⚠️ Cannot connect to server.'; statusEl.style.color = '#e06b6b'; }
                } finally {
                    if (btn) { btn.disabled = false; btn.removeAttribute('aria-busy'); btn.innerHTML = original; }
                }
            });
        })();
    </script>
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="/script.js" defer></script>
</body>

</html>